{"ast":null,"code":"import { setLoginErrMsg, setLoginStatus } from '../redux/UserRedux/userAction';\nimport store from '../redux/store';\nimport axios from 'axios';\nexport const setUser = username => {\n  axios.post(\"http://localhost:5000/user/\" + username).then(user => {\n    let data = user.data;\n    console.log(data);\n    let details = {\n      isLoggedIn: false,\n      username: \"gaurav\",\n      userDetails: {\n        firstname: \"\",\n        lastname: \"\"\n      },\n      purchasedWidgets: [],\n      cartWidgets: [],\n      loginErrMsg: \"\"\n    };\n  }); // store.dispatch(setUserDetails(details));\n};\nexport const ValidateUser = (uname, pswd) => {\n  return new Promise((res, rej) => {\n    let userObj = {\n      \"username\": uname,\n      \"password\": pswd\n    };\n    axios.post(\"http://localhost:5000/user/login\", userObj).then(x => {\n      let isAuth = x.data.authenticated;\n\n      if (!isAuth) {\n        store.dispatch(setLoginErrMsg(x.data.errorMsg));\n        localStorage.setItem(\"auth\", \"false\");\n      } else {\n        store.dispatch(setLoginStatus(true));\n        store.dispatch(setLoginErrMsg(\"Authenticated !\"));\n        window.location.href = \"/\";\n        localStorage.setItem(\"auth\", \"true\");\n      }\n    });\n  });\n};\n_c = ValidateUser;\nexport const logOutUser = () => {\n  store.dispatch(setLoginStatus(false));\n  window.location.href = \"login\";\n  localStorage.setItem(\"auth\", \"false\");\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"ValidateUser\");","map":{"version":3,"names":["setLoginErrMsg","setLoginStatus","store","axios","setUser","username","post","then","user","data","console","log","details","isLoggedIn","userDetails","firstname","lastname","purchasedWidgets","cartWidgets","loginErrMsg","ValidateUser","uname","pswd","Promise","res","rej","userObj","x","isAuth","authenticated","dispatch","errorMsg","localStorage","setItem","window","location","href","logOutUser"],"sources":["D:/gaurav/engame2/my-app/src/Utils/userFunctions.tsx"],"sourcesContent":["import { setLoginErrMsg, setLoginStatus, setUserDetails } from '../redux/UserRedux/userAction';\r\nimport store from '../redux/store';\r\nimport axios from 'axios';\r\n\r\nexport const setUser = (username:any) => {\r\n\r\n    axios.post(\"http://localhost:5000/user/\" + username)\r\n    .then((user:any) => {\r\n        let data = user.data;\r\n        console.log(data);\r\n\r\n        let details = {\r\n            isLoggedIn: false,\r\n            username: \"gaurav\",\r\n            userDetails: {\r\n                firstname: \"\",\r\n                lastname: \"\"\r\n            },\r\n            purchasedWidgets: [],\r\n            cartWidgets: [],\r\n            loginErrMsg: \"\"\r\n        }\r\n\r\n\r\n    })\r\n\r\n    \r\n\r\n    // store.dispatch(setUserDetails(details));\r\n}\r\n\r\nexport const ValidateUser = (uname:any, pswd:any) => {\r\n    return new Promise((res,rej) => {\r\n        let userObj = {\r\n            \"username\": uname,\r\n            \"password\": pswd\r\n        }\r\n        axios.post(\"http://localhost:5000/user/login\", userObj)\r\n        .then((x:any) => {\r\n        let isAuth = x.data.authenticated;\r\n        if(!isAuth){\r\n            store.dispatch(setLoginErrMsg(x.data.errorMsg));\r\n            localStorage.setItem(\"auth\", \"false\");\r\n        }\r\n        else{\r\n            store.dispatch(setLoginStatus(true));\r\n            store.dispatch(setLoginErrMsg(\"Authenticated !\"));\r\n            window.location.href = \"/\";\r\n            localStorage.setItem(\"auth\", \"true\");\r\n        }\r\n        });\r\n    })\r\n\r\n  }\r\n\r\nexport const logOutUser = () => {\r\n    store.dispatch(setLoginStatus(false));\r\n    window.location.href = \"login\";\r\n    localStorage.setItem(\"auth\", \"false\");\r\n};"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,cAAzB,QAA+D,+BAA/D;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,OAAO,GAAIC,QAAD,IAAkB;EAErCF,KAAK,CAACG,IAAN,CAAW,gCAAgCD,QAA3C,EACCE,IADD,CACOC,IAAD,IAAc;IAChB,IAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;IACAC,OAAO,CAACC,GAAR,CAAYF,IAAZ;IAEA,IAAIG,OAAO,GAAG;MACVC,UAAU,EAAE,KADF;MAEVR,QAAQ,EAAE,QAFA;MAGVS,WAAW,EAAE;QACTC,SAAS,EAAE,EADF;QAETC,QAAQ,EAAE;MAFD,CAHH;MAOVC,gBAAgB,EAAE,EAPR;MAQVC,WAAW,EAAE,EARH;MASVC,WAAW,EAAE;IATH,CAAd;EAaH,CAlBD,EAFqC,CAwBrC;AACH,CAzBM;AA2BP,OAAO,MAAMC,YAAY,GAAG,CAACC,KAAD,EAAYC,IAAZ,KAAyB;EACjD,OAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAKC,GAAL,KAAa;IAC5B,IAAIC,OAAO,GAAG;MACV,YAAYL,KADF;MAEV,YAAYC;IAFF,CAAd;IAIAnB,KAAK,CAACG,IAAN,CAAW,kCAAX,EAA+CoB,OAA/C,EACCnB,IADD,CACOoB,CAAD,IAAW;MACjB,IAAIC,MAAM,GAAGD,CAAC,CAAClB,IAAF,CAAOoB,aAApB;;MACA,IAAG,CAACD,MAAJ,EAAW;QACP1B,KAAK,CAAC4B,QAAN,CAAe9B,cAAc,CAAC2B,CAAC,CAAClB,IAAF,CAAOsB,QAAR,CAA7B;QACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;MACH,CAHD,MAII;QACA/B,KAAK,CAAC4B,QAAN,CAAe7B,cAAc,CAAC,IAAD,CAA7B;QACAC,KAAK,CAAC4B,QAAN,CAAe9B,cAAc,CAAC,iBAAD,CAA7B;QACAkC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;QACAJ,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,MAA7B;MACH;IACA,CAbD;EAcH,CAnBM,CAAP;AAqBD,CAtBI;KAAMb,Y;AAwBb,OAAO,MAAMiB,UAAU,GAAG,MAAM;EAC5BnC,KAAK,CAAC4B,QAAN,CAAe7B,cAAc,CAAC,KAAD,CAA7B;EACAiC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,OAAvB;EACAJ,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;AACH,CAJM"},"metadata":{},"sourceType":"module"}