{"ast":null,"code":"import { setisLoggedIn, setLoginErrMsg, setUserDetails } from '../redux/UserRedux/userAction';\nimport store from '../redux/store';\nimport axios from 'axios';\nexport const setReduxUser = username => {\n  return new Promise((res, rej) => {\n    axios.get(\"http://localhost:5000/user/\" + username).then(user => {\n      var _data$purchasedwidget, _data$cartwidgets;\n\n      let data = user.data;\n      let details = {\n        isLoggedIn: true,\n        loginErrMsg: \"\",\n        username: data === null || data === void 0 ? void 0 : data.username,\n        firstname: data === null || data === void 0 ? void 0 : data.firstname,\n        lastname: data === null || data === void 0 ? void 0 : data.lastname,\n        accessToken: data === null || data === void 0 ? void 0 : data.accessToken,\n        purchasedWidgets: data === null || data === void 0 ? void 0 : (_data$purchasedwidget = data.purchasedwidgets) === null || _data$purchasedwidget === void 0 ? void 0 : _data$purchasedwidget.slice(),\n        cartWidgets: data === null || data === void 0 ? void 0 : (_data$cartwidgets = data.cartwidgets) === null || _data$cartwidgets === void 0 ? void 0 : _data$cartwidgets.slice()\n      }; // store.dispatch(setUserDetails(details));\n\n      res(details);\n    });\n  });\n};\nexport const logInUser = () => {\n  // store.dispatch(setisLoggedIn(true));\n  // window.location.href = \"/\";\n  localStorage.setItem(\"auth\", \"true\");\n};\nexport const logOutUser = () => {\n  store.dispatch(setisLoggedIn(false)); // window.location.href = \"login\";\n\n  localStorage.setItem(\"auth\", \"false\");\n}; // function ab(){\n//     return[setLoginErrMsg(\"Authenticated !\"), setisLoggedIn(true)]\n// }\n\nconst action1 = () => {\n  return dispatch => {\n    dispatch(setLoginErrMsg(\"Authenticated !\"));\n    dispatch(setisLoggedIn(true));\n  };\n};\n\nexport const ValidateUser = (uname, pswd) => {\n  // return new Promise((res,rej) => {\n  let isAuth;\n  let userObj = {\n    \"username\": uname,\n    \"password\": pswd\n  };\n  axios.post(\"http://localhost:5000/user/login\", userObj).then(x => {\n    isAuth = x.data.authenticated;\n\n    if (!isAuth) {\n      store.dispatch(setLoginErrMsg(x.data.errorMsg));\n      localStorage.setItem(\"auth\", \"false\");\n    } else {\n      setReduxUser(uname).then(data => store.dispatch(setUserDetails(data))); // store.dispatch(setLoginErrMsg(x.data.errorMsg));\n\n      localStorage.setItem(\"auth\", \"true\");\n    }\n  }); // })\n}; // export const loginSeq = async (uname:any, pswd:any) => {\n//     const a = ValidateUser\n// }\n\n_c = ValidateUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"ValidateUser\");","map":{"version":3,"names":["setisLoggedIn","setLoginErrMsg","setUserDetails","store","axios","setReduxUser","username","Promise","res","rej","get","then","user","data","details","isLoggedIn","loginErrMsg","firstname","lastname","accessToken","purchasedWidgets","purchasedwidgets","slice","cartWidgets","cartwidgets","logInUser","localStorage","setItem","logOutUser","dispatch","action1","ValidateUser","uname","pswd","isAuth","userObj","post","x","authenticated","errorMsg"],"sources":["D:/gaurav/engame2/my-app/src/Utils/userFunctions.tsx"],"sourcesContent":["import { setCartWidgets, setisLoggedIn, setLoginErrMsg, setPurchasedWidgets, setUserDetails } from '../redux/UserRedux/userAction';\r\nimport store from '../redux/store';\r\nimport axios from 'axios';\r\n\r\nexport const setReduxUser = (username:any) => {\r\n    return new Promise((res,rej) => {\r\n        axios.get(\"http://localhost:5000/user/\" + username)\r\n        .then((user:any) => {\r\n            let data = user.data;\r\n            let details = {\r\n                isLoggedIn: true,\r\n                loginErrMsg: \"\",\r\n                username: data?.username,\r\n                firstname: data?.firstname,\r\n                lastname: data?.lastname,\r\n                accessToken: data?.accessToken,\r\n                purchasedWidgets: data?.purchasedwidgets?.slice(),\r\n                cartWidgets: data?.cartwidgets?.slice()\r\n            }\r\n            // store.dispatch(setUserDetails(details));\r\n            res(details)\r\n        })\r\n    })\r\n}\r\n\r\nexport const logInUser = () => {\r\n    // store.dispatch(setisLoggedIn(true));\r\n    // window.location.href = \"/\";\r\n    localStorage.setItem(\"auth\", \"true\");\r\n};\r\n\r\nexport const logOutUser = () => {\r\n    store.dispatch(setisLoggedIn(false));\r\n    // window.location.href = \"login\";\r\n    localStorage.setItem(\"auth\", \"false\");\r\n};\r\n\r\n// function ab(){\r\n//     return[setLoginErrMsg(\"Authenticated !\"), setisLoggedIn(true)]\r\n// }\r\n\r\nconst action1 = () => {\r\n    return (dispatch:any) => {\r\n      dispatch(setLoginErrMsg(\"Authenticated !\"))\r\n      dispatch(setisLoggedIn(true))\r\n    }\r\n  }\r\n\r\nexport const ValidateUser = (uname:any, pswd:any) => {\r\n    // return new Promise((res,rej) => {\r\n        let isAuth:any;\r\n        let userObj = {\r\n            \"username\": uname,\r\n            \"password\": pswd\r\n        }\r\n        axios.post(\"http://localhost:5000/user/login\", userObj)\r\n        .then((x:any) => {\r\n            isAuth = x.data.authenticated;\r\n            if(!isAuth){\r\n                store.dispatch(setLoginErrMsg(x.data.errorMsg));\r\n                localStorage.setItem(\"auth\", \"false\");\r\n            }\r\n            else{\r\n                setReduxUser(uname)\r\n                .then(data => store.dispatch(setUserDetails(data)))\r\n                // store.dispatch(setLoginErrMsg(x.data.errorMsg));\r\n                localStorage.setItem(\"auth\", \"true\");\r\n            }\r\n        })\r\n    // })\r\n\r\n}\r\n\r\n// export const loginSeq = async (uname:any, pswd:any) => {\r\n//     const a = ValidateUser\r\n// }"],"mappings":"AAAA,SAAyBA,aAAzB,EAAwCC,cAAxC,EAA6EC,cAA7E,QAAmG,+BAAnG;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,YAAY,GAAIC,QAAD,IAAkB;EAC1C,OAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAKC,GAAL,KAAa;IAC5BL,KAAK,CAACM,GAAN,CAAU,gCAAgCJ,QAA1C,EACCK,IADD,CACOC,IAAD,IAAc;MAAA;;MAChB,IAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;MACA,IAAIC,OAAO,GAAG;QACVC,UAAU,EAAE,IADF;QAEVC,WAAW,EAAE,EAFH;QAGVV,QAAQ,EAAEO,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEP,QAHN;QAIVW,SAAS,EAAEJ,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEI,SAJP;QAKVC,QAAQ,EAAEL,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEK,QALN;QAMVC,WAAW,EAAEN,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEM,WANT;QAOVC,gBAAgB,EAAEP,IAAF,aAAEA,IAAF,gDAAEA,IAAI,CAAEQ,gBAAR,0DAAE,sBAAwBC,KAAxB,EAPR;QAQVC,WAAW,EAAEV,IAAF,aAAEA,IAAF,4CAAEA,IAAI,CAAEW,WAAR,sDAAE,kBAAmBF,KAAnB;MARH,CAAd,CAFgB,CAYhB;;MACAd,GAAG,CAACM,OAAD,CAAH;IACH,CAfD;EAgBH,CAjBM,CAAP;AAkBH,CAnBM;AAqBP,OAAO,MAAMW,SAAS,GAAG,MAAM;EAC3B;EACA;EACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,MAA7B;AACH,CAJM;AAMP,OAAO,MAAMC,UAAU,GAAG,MAAM;EAC5BzB,KAAK,CAAC0B,QAAN,CAAe7B,aAAa,CAAC,KAAD,CAA5B,EAD4B,CAE5B;;EACA0B,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;AACH,CAJM,C,CAMP;AACA;AACA;;AAEA,MAAMG,OAAO,GAAG,MAAM;EAClB,OAAQD,QAAD,IAAkB;IACvBA,QAAQ,CAAC5B,cAAc,CAAC,iBAAD,CAAf,CAAR;IACA4B,QAAQ,CAAC7B,aAAa,CAAC,IAAD,CAAd,CAAR;EACD,CAHD;AAID,CALH;;AAOA,OAAO,MAAM+B,YAAY,GAAG,CAACC,KAAD,EAAYC,IAAZ,KAAyB;EACjD;EACI,IAAIC,MAAJ;EACA,IAAIC,OAAO,GAAG;IACV,YAAYH,KADF;IAEV,YAAYC;EAFF,CAAd;EAIA7B,KAAK,CAACgC,IAAN,CAAW,kCAAX,EAA+CD,OAA/C,EACCxB,IADD,CACO0B,CAAD,IAAW;IACbH,MAAM,GAAGG,CAAC,CAACxB,IAAF,CAAOyB,aAAhB;;IACA,IAAG,CAACJ,MAAJ,EAAW;MACP/B,KAAK,CAAC0B,QAAN,CAAe5B,cAAc,CAACoC,CAAC,CAACxB,IAAF,CAAO0B,QAAR,CAA7B;MACAb,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;IACH,CAHD,MAII;MACAtB,YAAY,CAAC2B,KAAD,CAAZ,CACCrB,IADD,CACME,IAAI,IAAIV,KAAK,CAAC0B,QAAN,CAAe3B,cAAc,CAACW,IAAD,CAA7B,CADd,EADA,CAGA;;MACAa,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,MAA7B;IACH;EACJ,CAbD,EAP6C,CAqBjD;AAEH,CAvBM,C,CAyBP;AACA;AACA;;KA3BaI,Y"},"metadata":{},"sourceType":"module"}