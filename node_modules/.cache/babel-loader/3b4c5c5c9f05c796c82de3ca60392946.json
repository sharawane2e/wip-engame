{"ast":null,"code":"import { setCartWidgets, setisLoggedIn, setLoginErrMsg, setPurchasedWidgets, setUserDetails } from '../redux/UserRedux/userAction';\nimport store from '../redux/store';\nimport axios from 'axios';\nexport const setReduxUser = username => {\n  return new Promise((res, rej) => {\n    axios.get(\"http://localhost:5000/user/\" + username).then(user => {\n      console.log(user.data);\n      let data = user.data;\n      let details = {\n        username: data.username,\n        firstname: data.firstname,\n        lastname: data.lastname\n      };\n      store.dispatch(setUserDetails(details));\n      store.dispatch(setPurchasedWidgets(data.purchasedwidgets));\n      store.dispatch(setCartWidgets(data.cartwidgets));\n    });\n  });\n};\nexport const logInUser = () => {\n  store.dispatch(setisLoggedIn(true));\n  window.location.href = \"/\";\n  localStorage.setItem(\"auth\", \"true\");\n};\nexport const logOutUser = () => {\n  store.dispatch(setisLoggedIn(false));\n  window.location.href = \"login\";\n  localStorage.setItem(\"auth\", \"false\");\n}; // function ab(){\n//     return[setLoginErrMsg(\"Authenticated !\"), setisLoggedIn(true)]\n// }\n\nconst action1 = () => {\n  return dispatch => {\n    dispatch(setLoginErrMsg(\"Authenticated !\"));\n    dispatch(setisLoggedIn(true));\n  };\n};\n\nexport const ValidateUser = (uname, pswd) => {\n  return new Promise((res, rej) => {\n    let isAuth;\n    let userObj = {\n      \"username\": uname,\n      \"password\": pswd\n    };\n    axios.post(\"http://localhost:5000/user/login\", userObj).then(x => {\n      isAuth = x.data.authenticated;\n\n      if (!isAuth) {\n        store.dispatch(setLoginErrMsg(x.data.errorMsg));\n        localStorage.setItem(\"auth\", \"false\");\n        res(false);\n      } else {\n        store.dispatch(setLoginErrMsg(\"Authenticated !\")); // logInUser();\n\n        setTimeout(() => {\n          setReduxUser(uname);\n        }, 0);\n        res(true);\n      }\n    });\n  });\n}; // export const loginSeq = async (uname:any, pswd:any) => {\n//     const a = ValidateUser\n// }\n\n_c = ValidateUser;\n\nvar _c;\n\n$RefreshReg$(_c, \"ValidateUser\");","map":{"version":3,"names":["setCartWidgets","setisLoggedIn","setLoginErrMsg","setPurchasedWidgets","setUserDetails","store","axios","setReduxUser","username","Promise","res","rej","get","then","user","console","log","data","details","firstname","lastname","dispatch","purchasedwidgets","cartwidgets","logInUser","window","location","href","localStorage","setItem","logOutUser","action1","ValidateUser","uname","pswd","isAuth","userObj","post","x","authenticated","errorMsg","setTimeout"],"sources":["D:/gaurav/engame2/my-app/src/Utils/userFunctions.tsx"],"sourcesContent":["import { setCartWidgets, setisLoggedIn, setLoginErrMsg, setPurchasedWidgets, setUserDetails } from '../redux/UserRedux/userAction';\r\nimport store from '../redux/store';\r\nimport axios from 'axios';\r\n\r\nexport const setReduxUser = (username:any) => {\r\n    return new Promise((res,rej) => {\r\n        axios.get(\"http://localhost:5000/user/\" + username)\r\n        .then((user:any) => {\r\n            console.log(user.data)\r\n            let data = user.data;\r\n            let details = {\r\n                username: data.username,\r\n                firstname: data.firstname,\r\n                lastname: data.lastname,\r\n            }\r\n            store.dispatch(setUserDetails(details));\r\n            store.dispatch(setPurchasedWidgets(data.purchasedwidgets));\r\n            store.dispatch(setCartWidgets(data.cartwidgets));\r\n        })\r\n    })\r\n}\r\n\r\nexport const logInUser = () => {\r\n    store.dispatch(setisLoggedIn(true));\r\n    window.location.href = \"/\";\r\n    localStorage.setItem(\"auth\", \"true\");\r\n};\r\n\r\nexport const logOutUser = () => {\r\n    store.dispatch(setisLoggedIn(false));\r\n    window.location.href = \"login\";\r\n    localStorage.setItem(\"auth\", \"false\");\r\n};\r\n\r\n// function ab(){\r\n//     return[setLoginErrMsg(\"Authenticated !\"), setisLoggedIn(true)]\r\n// }\r\n\r\nconst action1 = () => {\r\n    return (dispatch:any) => {\r\n      dispatch(setLoginErrMsg(\"Authenticated !\"))\r\n      dispatch(setisLoggedIn(true))\r\n    }\r\n  }\r\n\r\nexport const ValidateUser = (uname:any, pswd:any) => {\r\n    return new Promise((res,rej) => {\r\n        let isAuth:any;\r\n        let userObj = {\r\n            \"username\": uname,\r\n            \"password\": pswd\r\n        }\r\n        axios.post(\"http://localhost:5000/user/login\", userObj)\r\n        .then((x:any) => {\r\n        isAuth = x.data.authenticated;\r\n        if(!isAuth){\r\n            store.dispatch(setLoginErrMsg(x.data.errorMsg));\r\n            localStorage.setItem(\"auth\", \"false\");\r\n            res(false);\r\n        }\r\n        else{\r\n            store.dispatch(setLoginErrMsg(\"Authenticated !\"));\r\n            // logInUser();\r\n            setTimeout(() => {\r\n                setReduxUser(uname);\r\n            }, 0);\r\n            res(true);\r\n        }\r\n        })\r\n    })\r\n\r\n}\r\n\r\n// export const loginSeq = async (uname:any, pswd:any) => {\r\n//     const a = ValidateUser\r\n// }"],"mappings":"AAAA,SAASA,cAAT,EAAyBC,aAAzB,EAAwCC,cAAxC,EAAwDC,mBAAxD,EAA6EC,cAA7E,QAAmG,+BAAnG;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAO,MAAMC,YAAY,GAAIC,QAAD,IAAkB;EAC1C,OAAO,IAAIC,OAAJ,CAAY,CAACC,GAAD,EAAKC,GAAL,KAAa;IAC5BL,KAAK,CAACM,GAAN,CAAU,gCAAgCJ,QAA1C,EACCK,IADD,CACOC,IAAD,IAAc;MAChBC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,IAAjB;MACA,IAAIA,IAAI,GAAGH,IAAI,CAACG,IAAhB;MACA,IAAIC,OAAO,GAAG;QACVV,QAAQ,EAAES,IAAI,CAACT,QADL;QAEVW,SAAS,EAAEF,IAAI,CAACE,SAFN;QAGVC,QAAQ,EAAEH,IAAI,CAACG;MAHL,CAAd;MAKAf,KAAK,CAACgB,QAAN,CAAejB,cAAc,CAACc,OAAD,CAA7B;MACAb,KAAK,CAACgB,QAAN,CAAelB,mBAAmB,CAACc,IAAI,CAACK,gBAAN,CAAlC;MACAjB,KAAK,CAACgB,QAAN,CAAerB,cAAc,CAACiB,IAAI,CAACM,WAAN,CAA7B;IACH,CAZD;EAaH,CAdM,CAAP;AAeH,CAhBM;AAkBP,OAAO,MAAMC,SAAS,GAAG,MAAM;EAC3BnB,KAAK,CAACgB,QAAN,CAAepB,aAAa,CAAC,IAAD,CAA5B;EACAwB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;EACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,MAA7B;AACH,CAJM;AAMP,OAAO,MAAMC,UAAU,GAAG,MAAM;EAC5BzB,KAAK,CAACgB,QAAN,CAAepB,aAAa,CAAC,KAAD,CAA5B;EACAwB,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,OAAvB;EACAC,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;AACH,CAJM,C,CAMP;AACA;AACA;;AAEA,MAAME,OAAO,GAAG,MAAM;EAClB,OAAQV,QAAD,IAAkB;IACvBA,QAAQ,CAACnB,cAAc,CAAC,iBAAD,CAAf,CAAR;IACAmB,QAAQ,CAACpB,aAAa,CAAC,IAAD,CAAd,CAAR;EACD,CAHD;AAID,CALH;;AAOA,OAAO,MAAM+B,YAAY,GAAG,CAACC,KAAD,EAAYC,IAAZ,KAAyB;EACjD,OAAO,IAAIzB,OAAJ,CAAY,CAACC,GAAD,EAAKC,GAAL,KAAa;IAC5B,IAAIwB,MAAJ;IACA,IAAIC,OAAO,GAAG;MACV,YAAYH,KADF;MAEV,YAAYC;IAFF,CAAd;IAIA5B,KAAK,CAAC+B,IAAN,CAAW,kCAAX,EAA+CD,OAA/C,EACCvB,IADD,CACOyB,CAAD,IAAW;MACjBH,MAAM,GAAGG,CAAC,CAACrB,IAAF,CAAOsB,aAAhB;;MACA,IAAG,CAACJ,MAAJ,EAAW;QACP9B,KAAK,CAACgB,QAAN,CAAenB,cAAc,CAACoC,CAAC,CAACrB,IAAF,CAAOuB,QAAR,CAA7B;QACAZ,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,OAA7B;QACAnB,GAAG,CAAC,KAAD,CAAH;MACH,CAJD,MAKI;QACAL,KAAK,CAACgB,QAAN,CAAenB,cAAc,CAAC,iBAAD,CAA7B,EADA,CAEA;;QACAuC,UAAU,CAAC,MAAM;UACblC,YAAY,CAAC0B,KAAD,CAAZ;QACH,CAFS,EAEP,CAFO,CAAV;QAGAvB,GAAG,CAAC,IAAD,CAAH;MACH;IACA,CAhBD;EAiBH,CAvBM,CAAP;AAyBH,CA1BM,C,CA4BP;AACA;AACA;;KA9BasB,Y"},"metadata":{},"sourceType":"module"}